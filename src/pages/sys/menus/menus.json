{
  "type": "page",
  "id": "u:0a52f5f370d6",
  "asideResizor": false,
  "style": {
    "boxShadow": " 0px 0px 0px 0px transparent"
  },
  "pullRefresh": {
    "disabled": true
  },
  "regions": [
    "body",
    "toolbar",
    "header"
  ],
  "title": "菜单管理",
  "body": [
    {
      "type": "form",
      "id": "u:7f52e1c3c69e",
      "api": "/amis/api/mock2/form/saveForm",
      "wrapWithPanel": false,
      "className": "",
      "panelClassName": "",
      "staticClassName": "",
      "mode": "normal",
      "body": [
        {
          "type": "grid",
          "id": "u:7242fc412b6e",
          "columns": [
            {
              "body": [
                {
                  "type": "crud",
                  "name": "contentMangeCrud",
                  "id": "u:a402298fc64d",
                  "syncLocation": false,
                  "api": {
                    "method": "post",
                    "url": "/api/graphql",
                    "dataType": "json",
                    "requestAdaptor": "console.log(\"api.发送适配器\", api)\n// console.log(\"amisExt.convertCondition(api.body.conditions))\", amisExt.convertCondition(api.body.conditions));\n\nvar jsonFilter = []\n\n\nvar filterParams = []\nif (api.body.displayText) {\n  filterParams.push(`{ field: \"name\", operator: CONTAINS, value: \"${api.body.displayText}\"}`)\n}\nif (api.body.selectedNode) {\n  filterParams.push(`{ field: \"parent\", operator: EQUALS, value: \"${api.body.selectedNode}\" }`);\n}\n\nconsole.log(\"filterParams.join(',')\", filterParams.join(','))\nconst query = `query curdQuery{ \n        data:pagedContentItems( \n            contentType: AntdMenuItem\n            page: ${api.body.page}  \n            pageSize: ${api.body.perPage} \n            orderBy: {field: \"${api.body.orderBy ? api.body.orderBy : 'modifiedUtc'}\", direction: ${api.body.orderDir ? api.body.orderDir.toUpperCase() : 'DESC'} } \n            dynamicFilter: {\n            filters:\n            [\n              ${filterParams.join(',')}\n            ],logic: AND}\n              )\n            {  \n                total\n       items {\n      ... on AntdMenuItem {\n        access\n        createdUtc\n        target\n        redirect\n        publishedUtc\n        published\n        path\n        owner\n        otherConfig\n        orderIndex\n        modifiedUtc\n        name\n        menuType\n        locale\n        latest\n        icon\n        hideInMenu\n        displayText\n        contentType\n        contentItemVersionId\n        contentItemId\n        author\n        parent{firstValue}\n        permissions{roles}\n      }\n                    \n                }\n            }\n        }`\napi.data = { query }\nconsole.log(\"api.发送适配器2\", api)\nreturn api",
                    "adaptor": "console.log(\"datatatat\", response)\r\nlet data = response.data.data\r\n\r\nif (!data?.items) {\r\n  return {\r\n    items: []\r\n  };\r\n}\r\nvar mapData = data.items.map(x => {\r\n  if (x.parent && x.parent.firstValue) {\r\n    x.parentId = x.parent.firstValue\r\n  } else {\r\n    x.parentId=null\r\n  }\r\n  return x;\r\n});\r\nconst treeData = listToTree(mapData, {\r\n  pid: \"parentId\",\r\n  children: \"children\",\r\n  id: \"contentItemId\"\r\n})\r\nconsole.log(\"treeData\", treeData)\r\nconst result = {\r\n  items: treeData,\r\n  total: data.total\r\n}\r\nconsole.log(\"treeData result\",result)\r\nreturn result",
                    "messages": {}
                  },
                  "columns": [
                    {
                      "name": "displayText",
                      "label": "显示名称",
                      "type": "text",
                      "id": "u:24a5a543514d"
                    },
                    {
                      "label": "操作",
                      "type": "operation",
                      "id": "u:57d6fb047f9e",
                      "buttons": [
                        {
                          "type": "button",
                          "id": "u:cd399b879627",
                          "label": "编辑",
                          "level": "link",
                          "onEvent": {
                            "click": {
                              "actions": [
                                {
                                  "dialog": {
                                    "type": "dialog",
                                    "title": "编辑",
                                    "body": [
                                      {
                                        "type": "form",
                                        "id": "frmEdit",
                                        "body": [
                                          {
                                            "type": "input-text",
                                            "id": "u:52c697de330b",
                                            "name": "contentItemId",
                                            "label": "菜单编号",
                                            "readOnly": true,
                                            "clearable": false
                                          },
                                          {
                                            "name": "menuType",
                                            "label": "页面类型",
                                            "description": null,
                                            "type": "radios",
                                            "id": "u:d10904e4abc9",
                                            "multiple": false,
                                            "required": true,
                                            "options": [
                                              {
                                                "label": "节点",
                                                "value": "Node"
                                              },
                                              {
                                                "label": "动态页面",
                                                "value": "DynamicPage"
                                              },
                                              {
                                                "label": "实际页面",
                                                "value": "Component"
                                              }
                                            ]
                                          },
                                          {
                                            "name": "parent.firstValue",
                                            "label": "Parent",
                                            "description": "顶层菜单无需选择",
                                            "type": "tree-select",
                                            "id": "u:344d1b8383aa",
                                            "disabled": false,
                                            "checkAll": false,
                                            "searchable": true,
                                            "multiple": false,
                                            "extractValue": false,
                                            "source": {
                                              "url": "/api/DynamicMenus/GetAllMenus?nodesOnly=true",
                                              "method": "get",
                                              "messages": {},
                                              "requestAdaptor": "",
                                              "adaptor": ""
                                            },
                                            "clearable": true,
                                            "enableNodePath": false,
                                            "hideRoot": true,
                                            "showIcon": true,
                                            "initiallyOpen": true
                                          },
                                          {
                                            "name": "schemaId.firstValue",
                                            "label": "动态页面",
                                            "description": null,
                                            "type": "select",
                                            "required": false,
                                            "disabled": false,
                                            "id": "u:068bb684a369",
                                            "checkAll": false,
                                            "searchable": true,
                                            "multiple": false,
                                            "extractValue": false,
                                            "hiddenOn": "this.menuType!='DynamicPage'",
                                            "autoComplete": {
                                              "method": "post",
                                              "url": "/api/graphql",
                                              "dataType": "json",
                                              "replaceData": false,
                                              "requestAdaptor": "const query=`\n                            {\n                                options:amisSchema\n                                (status: PUBLISHED, first: 10, \n                                    where: {displayText_contains: \"${api.body.term}\"}) \n                                {\n                                    label:displayText\n                                    value:contentItemId\n                                }\n                            }`\n                            api.data={query}\n                            return api"
                                            },
                                            "onEvent": {
                                              "change": {
                                                "weight": 0,
                                                "actions": []
                                              }
                                            }
                                          },
                                          {
                                            "name": "name",
                                            "label": "Name",
                                            "description": "${this.menuType=='DynamicPage'?'动态菜单无法设置此项':''}",
                                            "type": "input-text",
                                            "required": true,
                                            "disabled": false,
                                            "id": "u:a46f25923e63",
                                            "readOnly": false
                                          },
                                          {
                                            "name": "displayText",
                                            "description": "${this.menuType=='DynamicPage'?'动态菜单无法设置此项':''}",
                                            "type": "input-text",
                                            "required": true,
                                            "disabled": false,
                                            "id": "u:9e93174ff651",
                                            "label": "显示名",
                                            "readOnly": false
                                          },
                                          {
                                            "name": "path",
                                            "description": null,
                                            "type": "input-text",
                                            "disabled": false,
                                            "id": "u:aa716fd32ab5",
                                            "label": "Path",
                                            "hiddenOn": "this.menuType=='DynamicPage'",
                                            "required": true,
                                            "readOnly": false,
                                            "hideOn": "this.menuType=='DynamicPage'"
                                          },
                                          {
                                            "name": "redirect",
                                            "type": "input-text",
                                            "id": "u:fa50812323f1",
                                            "label": "跳转",
                                            "description": "redirect 属性",
                                            "disabled": false,
                                            "hiddenOn": "this.menuType!='Node'"
                                          },
                                          {
                                            "name": "permissions.roles",
                                            "type": "select",
                                            "id": "u:6de0bb56a8c6",
                                            "label": "权限",
                                            "multiple": true,
                                            "source": "${allRoles}",
                                            "checkAll": false,
                                            "joinValues": false,
                                            "extractValue": true
                                          },
                                          {
                                            "name": "access",
                                            "description": null,
                                            "type": "input-text",
                                            "required": false,
                                            "disabled": false,
                                            "id": "u:fac0f8ff493b",
                                            "label": "页面权限"
                                          },
                                          {
                                            "name": "hideInMenu",
                                            "description": null,
                                            "type": "switch",
                                            "required": false,
                                            "disabled": false,
                                            "id": "u:60ed4ca17486",
                                            "option": "在菜单中隐藏"
                                          },
                                          {
                                            "name": "icon",
                                            "description": "参考 <a href=\"https://preview-21293-ant-design.surge.sh/components/icon-cn/\" target=\"blank\"> Icons</a>",
                                            "type": "input-text",
                                            "required": false,
                                            "disabled": false,
                                            "id": "u:7e43b538ffd9",
                                            "label": "Icon"
                                          },
                                          {
                                            "name": "locale",
                                            "description": "未开启多语言时将使用Name 作为菜单名称",
                                            "type": "switch",
                                            "required": false,
                                            "disabled": false,
                                            "id": "u:c8b23f92fbea",
                                            "value": false,
                                            "option": "多语言"
                                          },
                                          {
                                            "name": "zhCN",
                                            "label": "中文",
                                            "description": null,
                                            "type": "input-text",
                                            "required": false,
                                            "disabled": false,
                                            "id": "u:a089068d5846",
                                            "hiddenOn": "!this.locale",
                                            "value": ""
                                          },
                                          {
                                            "name": "enUS",
                                            "label": "英文",
                                            "description": "其他语言请在其他设置中添加 如：lanng:{\"fr\":\"franch\"}",
                                            "type": "input-text",
                                            "disabled": false,
                                            "id": "u:369267b90f5f",
                                            "required": false,
                                            "hiddenOn": "!this.locale"
                                          },
                                          {
                                            "name": "target",
                                            "label": "Target",
                                            "description": null,
                                            "type": "input-text",
                                            "disabled": false,
                                            "id": "u:60773bc5cf38",
                                            "required": false
                                          },
                                          {
                                            "name": "orderIndex",
                                            "label": "排序",
                                            "description": null,
                                            "type": "input-text",
                                            "disabled": false,
                                            "id": "u:a67f7d0d2237",
                                            "required": false
                                          },
                                          {
                                            "name": "otherConfig",
                                            "label": "其他设置",
                                            "description": null,
                                            "type": "editor",
                                            "disabled": false,
                                            "id": "u:19f64122222b"
                                          }
                                        ],
                                        "initApi": {
                                          "method": "post",
                                          "url": "/api/graphql",
                                          "dataType": "json",
                                          "replaceData": true,
                                          "requestAdaptor": "\r\n\r\n\r\nconst query = ` {\r\n  data:contentItem(contentItemId: \"${api.body.contentItemId}\") {\r\n    contentItemId\r\n    displayText\r\n    contentType\r\n    contentItemVersionId\r\n    modifiedUtc\r\n    publishedUtc\r\n    owner\r\n    createdUtc\r\n    author\r\n    ... on AntdMenuItem {\r\n      contentItemId\r\n      displayText\r\n      path\r\n      name\r\n      icon\r\n      enUS\r\n      zhCN\r\n      target\r\n      access\r\n      hideInMenu\r\n      otherConfig\r\n      menuType\r\n      schemaId {\r\n        firstValue\r\n        firstContentItem {\r\n          displayText\r\n        }\r\n      }\r\n      redirect\r\n      locale\r\n      orderIndex\r\n      modifiedUtc\r\n      createdUtc\r\n      owner\r\n      author\r\n      publishedUtc\r\n      contentItemVersionId\r\n      contentType\r\n      latest\r\n      published\r\n      permissions {\r\n        roles\r\n      }\r\n      parent{\r\n        firstValue\r\n      }\r\n    }\r\n  }\r\n}\r\n`\r\napi.data = { query } \r\nconsole.log(\" api:get\", api)\r\nreturn api",
                                          "adaptor": "console.log(\" data:contentItem\", response)\r\n\r\nreturn {\r\n  data: response.data.data\r\n}",
                                          "messages": {},
                                          "data": {
                                            "&": "$$"
                                          }
                                        },
                                        "api": {
                                          "method": "post",
                                          "url": "/api/ContentManagement/PostContent",
                                          "dataType": "json",
                                          "data": {
                                            "&": "$$",
                                            "contentType": "AntdMenuItem"
                                          },
                                          "messages": {}
                                        },
                                        "name": "frmEdit",
                                        "actions": [
                                          {
                                            "type": "button",
                                            "label": "取消",
                                            "actionType": "cancel",
                                            "id": "u:6f04f6521dc7"
                                          },
                                          {
                                            "type": "button",
                                            "label": "提交",
                                            "actionType": "confirm",
                                            "id": "u:8b74b5644485",
                                            "reload": "contentMangeCrud,contentViewer",
                                            "level": "primary"
                                          }
                                        ],
                                        "debug": false,
                                        "onEvent": {
                                          "submitSucc": {
                                            "weight": 0,
                                            "actions": [
                                              {
                                                "componentId": "u:a402298fc64d",
                                                "args": {
                                                  "resetPage": true
                                                },
                                                "actionType": "reload",
                                                "dataMergeMode": "merge"
                                              }
                                            ]
                                          }
                                        },
                                        "mode": "normal"
                                      }
                                    ],
                                    "showCloseButton": true,
                                    "showErrorMsg": true,
                                    "showLoading": true,
                                    "id": "u:1a29f6150c04",
                                    "resizable": true,
                                    "closeOnEsc": true,
                                    "closeOnOutside": true,
                                    "size": "md",
                                    "dataMapSwitch": true,
                                    "dataMap": {
                                      "allRoles": "${allRoles}",
                                      "contentItemId": "${contentItemId}"
                                    },
                                    "data": {
                                      "allRoles": "${allRoles}",
                                      "contentItemId": "${contentItemId}"
                                    },
                                    "className": "",
                                    "bodyClassName": "",
                                    "onEvent": {
                                      "confirm": {
                                        "weight": 0,
                                        "actions": []
                                      }
                                    }
                                  },
                                  "actionType": "dialog"
                                }
                              ],
                              "weight": 0
                            }
                          }
                        },
                        {
                          "type": "button",
                          "label": "删除",
                          "level": "link",
                          "confirmText": "确定要删除？",
                          "id": "u:1251eb883a85",
                          "className": "text-danger",
                          "onEvent": {
                            "click": {
                              "weight": 0,
                              "actions": [
                                {
                                  "args": {
                                    "options": {},
                                    "api": {
                                      "url": "/api/ContentManagement/Delete?contentItemId=${contentItemId}",
                                      "method": "delete",
                                      "messages": {}
                                    }
                                  },
                                  "actionType": "ajax",
                                  "outputVar": "responseResult"
                                },
                                {
                                  "componentId": "u:a402298fc64d",
                                  "args": {
                                    "resetPage": true
                                  },
                                  "actionType": "reload",
                                  "dataMergeMode": "merge"
                                }
                              ]
                            }
                          }
                        }
                      ]
                    },
                    {
                      "type": "text",
                      "label": "Path",
                      "id": "u:cb468054e33b",
                      "name": "path",
                      "sortable": true,
                      "placeholder": "-",
                      "toggled": false
                    },
                    {
                      "name": "name",
                      "label": "Name",
                      "sortable": false,
                      "type": "text",
                      "id": "u:00e22628c3d4",
                      "placeholder": "-"
                    },
                    {
                      "name": "permissions.roles",
                      "label": "权限",
                      "sortable": false,
                      "type": "text",
                      "id": "u:137d77a90254",
                      "placeholder": "-"
                    },
                    {
                      "name": "orderIndex",
                      "label": "排序",
                      "type": "text",
                      "id": "u:2862e8ec4af4"
                    },
                    {
                      "type": "text",
                      "label": "页面类型",
                      "name": "menuType",
                      "id": "u:464f8b3125f7",
                      "sortable": false,
                      "placeholder": "-"
                    },
                    {
                      "name": "modifiedUtc",
                      "label": "修改时间",
                      "sortable": false,
                      "type": "date",
                      "id": "u:cf69910762e1",
                      "placeholder": "-"
                    },
                    {
                      "type": "date",
                      "label": "创建时间",
                      "name": "createdUtc",
                      "placeholder": "-",
                      "sortable": false,
                      "id": "u:8cde8c628948",
                      "toggled": false
                    },
                    {
                      "name": "author",
                      "label": "创建人",
                      "type": "text",
                      "placeholder": "-",
                      "sortable": false,
                      "id": "u:2416b56a0fd2"
                    }
                  ],
                  "bulkActions": [],
                  "itemActions": [],
                  "features": [
                    "filter",
                    "create",
                    "update",
                    "view",
                    "delete"
                  ],
                  "filterColumnCount": 3,
                  "messages": {},
                  "perPage": 9999,
                  "alwaysShowPagination": true,
                  "perPageAvailable": [
                    9999
                  ],
                  "footerToolbar": [
                    {
                      "type": "statistics"
                    },
                    {
                      "type": "switch-per-page"
                    },
                    {
                      "type": "pagination",
                      "align": "right"
                    }
                  ],
                  "placeholder": "未查询到数据",
                  "headerToolbar": [
                    {
                      "label": "新增",
                      "type": "button",
                      "level": "primary",
                      "id": "u:6491389df168",
                      "onEvent": {
                        "click": {
                          "weight": 0,
                          "actions": [
                            {
                              "dialog": {
                                "type": "dialog",
                                "title": "新建菜单项",
                                "body": [
                                  {
                                    "type": "form",
                                    "id": "frmCreate",
                                    "body": [
                                      {
                                        "name": "menuType",
                                        "label": "页面类型",
                                        "description": null,
                                        "type": "radios",
                                        "id": "u:d10904e4abc9",
                                        "multiple": false,
                                        "required": true,
                                        "options": [
                                          {
                                            "label": "节点",
                                            "value": "Node"
                                          },
                                          {
                                            "label": "动态页面",
                                            "value": "DynamicPage"
                                          },
                                          {
                                            "label": "实际页面",
                                            "value": "Component"
                                          }
                                        ]
                                      },
                                      {
                                        "name": "parent.firstValue",
                                        "label": "Parent",
                                        "description": "顶层菜单无需选择",
                                        "type": "tree-select",
                                        "id": "u:344d1b8383aa",
                                        "disabled": false,
                                        "checkAll": false,
                                        "searchable": true,
                                        "multiple": false,
                                        "extractValue": false,
                                        "source": {
                                          "url": "/api/DynamicMenus/GetAllMenus?nodesOnly=true",
                                          "method": "get",
                                          "messages": {},
                                          "requestAdaptor": "",
                                          "adaptor": ""
                                        },
                                        "clearable": true,
                                        "enableNodePath": false,
                                        "hideRoot": true,
                                        "showIcon": true,
                                        "initiallyOpen": true,
                                        "onEvent": {},
                                        "hideNodePathLabel": false
                                      },
                                      {
                                        "name": "schemaId.firstValue",
                                        "label": "动态页面",
                                        "description": null,
                                        "type": "select",
                                        "required": false,
                                        "disabled": false,
                                        "id": "u:068bb684a369",
                                        "checkAll": false,
                                        "searchable": true,
                                        "multiple": false,
                                        "extractValue": false,
                                        "hiddenOn": "this.menuType!='DynamicPage'",
                                        "autoComplete": {
                                          "method": "post",
                                          "url": "/api/graphql",
                                          "dataType": "json",
                                          "replaceData": false,
                                          "requestAdaptor": "const query=`\n                            {\n                                options:amisSchema\n                                (status: PUBLISHED, first: 10, \n                                    where: {displayText_contains: \"${api.body.term}\"}) \n                                {\n                                    label:displayText\n                                    value:contentItemId\n                                }\n                            }`\n                            api.data={query}\n                            return api"
                                        },
                                        "onEvent": {
                                          "change": {
                                            "weight": 0,
                                            "actions": []
                                          }
                                        }
                                      },
                                      {
                                        "name": "name",
                                        "label": "Name",
                                        "description": "${this.menuType=='DynamicPage'?'动态菜单无法设置此项':''}",
                                        "type": "input-text",
                                        "required": true,
                                        "disabled": false,
                                        "id": "u:a46f25923e63",
                                        "readOnly": false
                                      },
                                      {
                                        "name": "displayText",
                                        "description": "${this.menuType=='DynamicPage'?'动态菜单无法设置此项':''}",
                                        "type": "input-text",
                                        "required": true,
                                        "disabled": false,
                                        "id": "u:9e93174ff651",
                                        "label": "显示名",
                                        "readOnly": false
                                      },
                                      {
                                        "name": "path",
                                        "description": null,
                                        "type": "input-text",
                                        "disabled": false,
                                        "id": "u:aa716fd32ab5",
                                        "label": "Path",
                                        "hiddenOn": "this.menuType=='DynamicPage'",
                                        "required": true,
                                        "readOnly": false,
                                        "hideOn": "this.menuType=='DynamicPage'"
                                      },
                                      {
                                        "name": "redirect",
                                        "type": "input-text",
                                        "id": "u:fa50812323f1",
                                        "label": "跳转",
                                        "description": "redirect 属性",
                                        "disabled": false,
                                        "hiddenOn": "this.menuType!='Node'"
                                      },
                                      {
                                        "name": "permissions.roles",
                                        "type": "select",
                                        "id": "u:6de0bb56a8c6",
                                        "label": "权限",
                                        "multiple": true,
                                        "source": "${allRoles}",
                                        "checkAll": false,
                                        "joinValues": false,
                                        "extractValue": true
                                      },
                                      {
                                        "name": "access",
                                        "description": null,
                                        "type": "input-text",
                                        "required": false,
                                        "disabled": false,
                                        "id": "u:fac0f8ff493b",
                                        "label": "页面权限"
                                      },
                                      {
                                        "name": "hideInMenu",
                                        "description": null,
                                        "type": "switch",
                                        "required": false,
                                        "disabled": false,
                                        "id": "u:60ed4ca17486",
                                        "option": "在菜单中隐藏"
                                      },
                                      {
                                        "name": "icon",
                                        "description": "参考 <a href=\"https://preview-21293-ant-design.surge.sh/components/icon-cn/\" target=\"blank\"> Icons</a>",
                                        "type": "input-text",
                                        "required": false,
                                        "disabled": false,
                                        "id": "u:7e43b538ffd9",
                                        "label": "Icon"
                                      },
                                      {
                                        "name": "locale",
                                        "description": "未开启多语言时将使用Name 作为菜单名称",
                                        "type": "switch",
                                        "required": false,
                                        "disabled": false,
                                        "id": "u:c8b23f92fbea",
                                        "option": "多语言"
                                      },
                                      {
                                        "name": "zhCN",
                                        "label": "中文",
                                        "description": null,
                                        "type": "input-text",
                                        "required": false,
                                        "disabled": false,
                                        "id": "u:a089068d5846",
                                        "hiddenOn": "!this.locale",
                                        "value": ""
                                      },
                                      {
                                        "name": "enUS",
                                        "label": "英文",
                                        "description": "其他语言请在其他设置中添加 如：lanng:{\"fr\":\"franch\"}",
                                        "type": "input-text",
                                        "disabled": false,
                                        "id": "u:369267b90f5f",
                                        "required": false,
                                        "hiddenOn": "!this.locale"
                                      },
                                      {
                                        "name": "target",
                                        "label": "Target",
                                        "description": null,
                                        "type": "input-text",
                                        "disabled": false,
                                        "id": "u:60773bc5cf38",
                                        "required": false
                                      },
                                      {
                                        "name": "orderIndex",
                                        "label": "排序",
                                        "description": null,
                                        "type": "input-text",
                                        "disabled": false,
                                        "id": "u:a67f7d0d2237",
                                        "required": false
                                      },
                                      {
                                        "name": "otherConfig",
                                        "label": "其他设置",
                                        "description": null,
                                        "type": "editor",
                                        "disabled": false,
                                        "id": "u:19f64122222b"
                                      }
                                    ],
                                    "api": {
                                      "method": "post",
                                      "url": "/api/ContentManagement/PostContent",
                                      "dataType": "json",
                                      "data": {
                                        "&": "$$",
                                        "contentType": "AntdMenuItem"
                                      },
                                      "messages": {}
                                    },
                                    "name": "frmEdit",
                                    "actions": [
                                      {
                                        "type": "button",
                                        "label": "取消",
                                        "actionType": "cancel",
                                        "id": "u:6f04f6521dc7"
                                      },
                                      {
                                        "type": "button",
                                        "label": "提交",
                                        "actionType": "confirm",
                                        "id": "u:8b74b5644485",
                                        "reload": "contentMangeCrud,contentViewer",
                                        "level": "primary"
                                      }
                                    ],
                                    "debug": false,
                                    "onEvent": {
                                      "submitSucc": {
                                        "weight": 0,
                                        "actions": [
                                          {
                                            "componentId": "u:a402298fc64d",
                                            "args": {
                                              "resetPage": true
                                            },
                                            "actionType": "reload",
                                            "dataMergeMode": "merge"
                                          }
                                        ]
                                      }
                                    },
                                    "mode": "normal"
                                  }
                                ],
                                "showCloseButton": true,
                                "showErrorMsg": true,
                                "showLoading": true,
                                "id": "u:8ed5c5012b05",
                                "size": "md"
                              },
                              "actionType": "dialog"
                            }
                          ]
                        }
                      }
                    },
                    "bulkActions"
                  ],
                  "primaryField": "contentItemId",
                  "filter": {
                    "title": "查询条件",
                    "name": "searchForm",
                    "body": [
                      {
                        "type": "tree-select",
                        "id": "u:5e241ff1478d",
                        "name": "selectedNode",
                        "label": "菜单节点",
                        "creatable": true,
                        "removable": false,
                        "editable": true,
                        "multiple": false,
                        "enableNodePath": false,
                        "hideRoot": true,
                        "showIcon": true,
                        "initiallyOpen": true,
                        "source": {
                          "url": "/api/DynamicMenus/GetAllMenus?nodesOnly=true",
                          "method": "get"
                        },
                        "className": "",
                        "inputClassName": "",
                        "staticClassName": "",
                        "treeContainerClassName": "h-full",
                        "mode": "inline",
                        "size": "lg",
                        "showOutline": true,
                        "onlyLeaf": false,
                        "addControls": [
                          {
                            "type": "radios",
                            "id": "u:d10904e4abc9",
                            "name": "menuType",
                            "label": "页面类型",
                            "description": null,
                            "multiple": false,
                            "required": true,
                            "options": [
                              {
                                "label": "节点",
                                "value": "Node"
                              },
                              {
                                "label": "动态页面",
                                "value": "DynamicPage",
                                "disabled": true
                              },
                              {
                                "label": "路由组件",
                                "value": "Component",
                                "disabled": true
                              }
                            ],
                            "value": "Node"
                          },
                          {
                            "name": "parent.firstValue",
                            "label": "Parent",
                            "description": "顶层菜单无需选择",
                            "type": "tree-select",
                            "id": "u:344d1b8383aa",
                            "disabled": false,
                            "checkAll": false,
                            "searchable": true,
                            "multiple": false,
                            "extractValue": false,
                            "source": {
                              "url": "/api/DynamicMenus/GetAllMenus?nodesOnly=true",
                              "method": "get"
                            },
                            "clearable": true,
                            "enableNodePath": false,
                            "hideRoot": true,
                            "showIcon": true,
                            "initiallyOpen": true,
                            "value": "${ext.contentItemId}"
                          },
                          {
                            "name": "schemaId.firstValue",
                            "label": "动态页面",
                            "description": null,
                            "type": "select",
                            "required": false,
                            "disabled": false,
                            "id": "u:068bb684a369",
                            "checkAll": false,
                            "searchable": true,
                            "multiple": false,
                            "extractValue": false,
                            "hiddenOn": "this.menuType!='DynamicPage'",
                            "autoComplete": {
                              "method": "post",
                              "url": "/api/graphql",
                              "dataType": "json",
                              "replaceData": false,
                              "requestAdaptor": "const query=`\n                            {\n                                options:amisSchema\n                                (status: PUBLISHED, first: 10, \n                                    where: {displayText_contains: \"${api.body.term}\"}) \n                                {\n                                    label:displayText\n                                    value:contentItemId\n                                }\n                            }`\n                            api.data={query}\n                            return api"
                            },
                            "onEvent": {
                              "change": {
                                "weight": 0,
                                "actions": []
                              }
                            }
                          },
                          {
                            "name": "name",
                            "label": "Name",
                            "description": "${this.menuType=='DynamicPage'?'动态菜单无法设置此项':''}",
                            "type": "input-text",
                            "required": true,
                            "disabled": false,
                            "id": "u:a46f25923e63",
                            "readOnly": false
                          },
                          {
                            "name": "path",
                            "description": null,
                            "type": "input-text",
                            "required": true,
                            "disabled": false,
                            "id": "u:aa716fd32ab5",
                            "label": "Path",
                            "hiddenOn": "this.menuType=='DynamicPage'",
                            "readOnly": false,
                            "hideOn": "this.menuType=='DynamicPage'"
                          },
                          {
                            "name": "redirect",
                            "description": "redirect 属性",
                            "type": "input-text",
                            "disabled": false,
                            "id": "u:fa50812323f1",
                            "label": "跳转",
                            "hiddenOn": "this.menuType!='Node'"
                          },
                          {
                            "name": "permissions.roles",
                            "type": "select",
                            "id": "u:6de0bb56a8c6",
                            "label": "权限",
                            "multiple": true,
                            "source": "${allRoles}",
                            "checkAll": false,
                            "joinValues": false,
                            "extractValue": true
                          },
                          {
                            "name": "access",
                            "description": null,
                            "type": "input-text",
                            "required": false,
                            "disabled": false,
                            "id": "u:fac0f8ff493b",
                            "label": "页面权限"
                          },
                          {
                            "name": "hideInMenu",
                            "description": null,
                            "type": "switch",
                            "required": false,
                            "disabled": false,
                            "id": "u:60ed4ca17486",
                            "option": "在菜单中隐藏"
                          },
                          {
                            "name": "icon",
                            "description": "参考 <a href=\"https://preview-21293-ant-design.surge.sh/components/icon-cn/\" target=\"blank\"> Icons</a>",
                            "type": "input-text",
                            "required": false,
                            "disabled": false,
                            "id": "u:7e43b538ffd9",
                            "label": "Icon"
                          },
                          {
                            "name": "locale",
                            "description": "未开启多语言时将使用Name 作为菜单名称",
                            "type": "switch",
                            "required": false,
                            "disabled": false,
                            "id": "u:c8b23f92fbea",
                            "option": "多语言"
                          },
                          {
                            "name": "zhCN",
                            "label": "中文",
                            "description": null,
                            "type": "input-text",
                            "required": false,
                            "disabled": false,
                            "id": "u:a089068d5846",
                            "hiddenOn": "!this.locale",
                            "value": ""
                          },
                          {
                            "name": "enUS",
                            "label": "英文",
                            "description": "其他语言请在其他设置中添加 如：lanng:{\"fr\":\"franch\"}",
                            "type": "input-text",
                            "required": false,
                            "disabled": false,
                            "id": "u:369267b90f5f",
                            "hiddenOn": "!this.locale"
                          },
                          {
                            "name": "target",
                            "label": "Target",
                            "description": null,
                            "type": "input-text",
                            "disabled": false,
                            "id": "u:60773bc5cf38",
                            "required": false
                          },
                          {
                            "name": "orderIndex",
                            "label": "排序",
                            "description": null,
                            "type": "input-text",
                            "disabled": false,
                            "id": "u:a67f7d0d2237",
                            "required": false
                          },
                          {
                            "name": "otherConfig",
                            "label": "其他设置",
                            "description": null,
                            "type": "editor",
                            "disabled": false,
                            "id": "u:19f64122222b"
                          }
                        ],
                        "onEvent": {},
                        "themeConfig": {},
                        "rootCreatable": true,
                        "rootCreateTip": "添加一级目录"
                      },
                      {
                        "type": "input-text",
                        "name": "displayText",
                        "label": "名称",
                        "size": "lg",
                        "id": "u:8d21b93e6e14",
                        "mode": "inline"
                      },
                      {
                        "type": "select",
                        "label": "角色",
                        "name": "roles",
                        "multiple": true,
                        "size": "lg",
                        "source": "${allRoles}",
                        "checkAll": false,
                        "id": "u:2f3881c8f1a5",
                        "className": "",
                        "labelClassName": ""
                      }
                    ],
                    "actions": [
                      {
                        "type": "submit",
                        "label": "搜索",
                        "actionType": "submit",
                        "id": "u:f919f2d70d5d",
                        "level": "primary"
                      }
                    ],
                    "checkAll": false,
                    "submitOnChange": true,
                    "perPageAvailable": [
                      10
                    ],
                    "mode": "inline",
                    "panelClassName": "",
                    "id": "u:1930dc58d93e",
                    "debug": false
                  },
                  "keepItemSelectionOnPageChange": true,
                  "labelTpl": "${displayText||contentItemId}",
                  "defaultParams": {},
                  "columnsTogglable": "auto",
                  "showFooter": false,
                  "footable": {
                    "expand": "all"
                  },
                  "affixHeader": false
                }
              ],
              "id": "u:c58c49448d76"
            }
          ],
          "gap": "lg",
          "subFormMode": "",
          "subFormHorizontal": {
            "leftFixed": "normal"
          },
          "className": "min-h-full"
        }
      ],
      "debug": false,
      "static": false,
      "target": "searchForm",
      "submitOnChange": true,
      "reload": "contentMangeCrud",
      "onEvent": {
        "change": {
          "weight": 0,
          "actions": [
            {
              "componentId": "u:1930dc58d93e",
              "args": {
                "value": "${event.data}"
              },
              "actionType": "setValue"
            }
          ]
        }
      }
    }
  ],
  "cssVars": {
    "--Tree-max-height": "100vh"
  },
  "data": {
    "selectdNode": ""
  }
}